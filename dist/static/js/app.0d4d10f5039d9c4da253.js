webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("p",[this._v("↓ファイルを選択して下さい↓")]),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},r,!1,function(t){n("mJ7C")},null,null).exports,s=n("/ocq"),u=n("c/Tr"),f=n.n(u),o=n("woOf"),h=n.n(o),l=n("BO1k"),c=n.n(l),d=n("Zrlr"),g=n.n(d),v=n("wxAW"),p=n.n(v);var y=function(){function t(e){g()(this,t),this.arrayBuffer=e,this.dataView=new DataView(e,0)}return p()(t,[{key:"validateIsPng",value:function(){if(this.dataView.byteLength<8)return!1;return function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(this.getUint8Array(0,8),[137,80,78,71,13,10,26,10])}},{key:"getDataURI",value:function(){return"data:image/png;base64,"+btoa(f()(new Uint8Array(this.arrayBuffer),function(t){return String.fromCharCode(t)}).join(""))}},{key:"getUint32",value:function(t){return this.dataView.getUint32(t,!1)}},{key:"getUint16",value:function(t){return this.dataView.getUint16(t,!1)}},{key:"getUint8",value:function(t){return this.dataView.getUint8(t)}},{key:"getChar",value:function(t){return String.fromCharCode(this.getUint8(t))}},{key:"getString",value:function(t,e){var n=this;return Array(e).fill(0).map(function(e,i){return n.getChar(t+i)}).join("")}},{key:"getUint8Array",value:function(t,e){var n=this;return Array(e).fill(0).map(function(e,i){return n.getUint8(t+i)})}},{key:"getStringWhile",value:function(t,e){for(var n=[],i=0,r=this.getUint8(t+i);e(r);)n.push(r),i+=1,r=this.getUint8(t+i);return{text:n.map(function(t,e){return String.fromCharCode(t)}).join(""),endOffset:t+i}}},{key:"readIHDRChunkData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;return{width:this.getUint32(t),height:this.getUint32(t+4),bitDepth:this.getUint8(t+8),colorType:this.getUint8(t+9),compression:this.getUint8(t+10),filter:this.getUint8(t+11),interlace:this.getUint8(t+12),crc:this.getUint32(t+13)}}},{key:"readPlteChunkData",value:function(t,e){for(var n=[],i=e-2,r=0;r<i;r+=3)n.push({red:this.getUint8(t+r),green:this.getUint8(t+r+1),blue:this.getUint8(t+r+2)});return n}},{key:"readtRNSChunkData",value:function(t,e,n){var i=this;return 3===n?Array(e).fill(0).map(function(e,n){return i.getUint8(t+n)}):Array(e/2).fill(0).map(function(e,n){return i.getUint16(t+2*n)})}},{key:"readFctlChunkData",value:function(t){return{sequenceNumber:this.getUint32(t),width:this.getUint32(t+4),height:this.getUint32(t+8),xOffset:this.getUint32(t+12),yOffset:this.getUint32(t+16),delayNum:this.getUint16(t+20),delayDen:this.getUint16(t+22),disposeOp:this.getUint8(t+24),blendOp:this.getUint8(t+25)}}},{key:"readActlChunkData",value:function(t){return{numFrames:this.getUint32(t),numPlays:this.getUint32(t)}}},{key:"readTextChunkData",value:function(t,e){return{text:this.getString(t,e)}}},{key:"readItxtChunkData",value:function(t){var e=this.getStringWhile(t,function(t){return 0!=t});return{keyword:e.text,compressionFlag:this.getUint8(e.endOffset+1),compressionMethod:this.getUint8(e.endOffset+2),languageTag:(e=this.getStringWhile(e.endOffset+3,function(t){return 0!=t})).text,translatedKeyword:(e=this.getStringWhile(e.endOffset,function(t){return 0!=t})).text,text:(e=this.getStringWhile(e.endOffset,function(t){return 0!=t})).text}}},{key:"readChrmChunkData",value:function(t){return{whilePoint:{x:this.getUint32(t+0),y:this.getUint32(t+4)},red:{x:this.getUint32(t+8),y:this.getUint32(t+12)},green:{x:this.getUint32(t+16),y:this.getUint32(t+20)},blue:{x:this.getUint32(t+24),y:this.getUint32(t+28)}}}},{key:"readPhysChunkData",value:function(t){return{pixelsPerUnit:{x:this.getUint32(t+0),y:this.getUint32(t+4)},unitSpecifier:this.getUint8(t+8)}}},{key:"readChunk",value:function(t){var e=t,n=this.getUint32(e);e+=4;var i=this.getString(e,4),r=e+=4;return e+=n,{size:n,type:i,crc:this.getUint32(e),dataOffset:r,endOffset:e+=4}}},{key:"getChunks",value:function(){for(var t=[],e={size:0,type:"",crc:0,endOffset:8};"IEND"!==e.type;)e=this.readChunk(e.endOffset),t.push(e);return t}},{key:"getChunkInformation",value:function(){var t=[],e=this.getChunks(),n=null,i=!0,r=!1,a=void 0;try{for(var s,u=c()(e);!(i=(s=u.next()).done);i=!0){var f=s.value;if(console.log(f),"IHDR"===f.type)n=this.readIHDRChunkData(f.dataOffset),t.push(h()(f,n));else if("tRNS"===f.type){var o=this.readtRNSChunkData(f.dataOffset,f.size,n.colorType||3);t.push(h()(f,{values:o}))}else if("fcTL"==f.type){var l=this.readFctlChunkData(f.dataOffset);t.push(h()(f,l))}else if("acTL"==f.type){var d=this.readActlChunkData(f.dataOffset);t.push(h()(f,d))}else if("tEXt"==f.type){var g=this.readTextChunkData(f.dataOffset,f.size);t.push(h()(f,g))}else if("iTXt"==f.type){var v=this.readItxtChunkData(f.dataOffset);t.push(h()(f,v))}else if("cHRM"==f.type){var p=this.readChrmChunkData(f.dataOffset);t.push(h()(f,p))}else if("pHYs"==f.type){var y=this.readPhysChunkData(f.dataOffset);t.push(h()(f,y))}else if("PLTE"==f.type){var m=this.readPlteChunkData(f.dataOffset,f.size);t.push(h()(f,{values:m}))}else t.push(f)}}catch(t){r=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw a}}return t}},{key:"showInformation",value:function(){var t=this.getChunks(),e=!0,n=!1,i=void 0;try{for(var r,a=c()(t);!(e=(r=a.next()).done);e=!0){var s=r.value;if(console.log(s),"IHDR"===s.type){var u=this.readIHDRChunkData(s.dataOffset);console.log(u)}}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}}]),t}(),m={name:"ImageView",data:function(){return{}},computed:{imageSrc:function(){return this.arrayBuffer?"data:image/png;base64,"+btoa(f()(new Uint8Array(this.arrayBuffer),function(t){return String.fromCharCode(t)}).join("")):""},chunks:function(){return this.readProps(this.arrayBuffer)}},props:["arrayBuffer"],methods:{readProps:function(t){if(t){var e=new y(t);return e.validateIsPng()?e.getChunkInformation():(console.log("This file is not PNG!"),[{type:"error",size:"error",message:"This file is not PNG!"}])}}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imageview"},[n("img",{attrs:{src:t.imageSrc}}),t._v(" "),n("div",{staticClass:"chunk-container"},t._l(t.chunks,function(e,i){return n("div",{key:i,staticClass:"chunk-box"},[n("div",{staticClass:"chunk-type"},[t._v("\n        "+t._s(e.type)+"\n        "),n("br"),t._v(" "),n("span",[t._v(t._s(e.size)+" bytes")])]),t._v(" "),n("div",{staticClass:"chunk-entries"},t._l(e,function(e,i){return n("div",{key:i,staticClass:"chunk-entry"},[["size","type","dataOffset","endOffset","crc"].indexOf(i)<0?n("span",[t._v(" "+t._s(i)+": "+t._s(e)+" ")]):t._e()])}))])}))])},staticRenderFns:[]};var U={name:"ImageView",data:function(){return{current_version:null,arrayBuffer:null}},computed:{filename:function(){return this.file.name}},props:["file","version"],mounted:function(){console.log("fileview: mounted"),this.reload()},beforeUpdate:function(){console.log("fileview: beforeUpdate",this.file.name),this.reload()},methods:{reload:function(){var t=this;if(null==this.current_version||this.current_version!=this.version){this.current_version=this.version;var e=new FileReader;e.onload=function(e){console.log("file loaded: { name: "+t.file.name+", size: "+t.file.size+" }"),t.arrayBuffer=e.target.result},e.readAsArrayBuffer(this.file)}}},components:{"image-view":n("VU/8")(m,k,!1,function(t){n("j87A")},"data-v-02b02d18",null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fileview"},[e("h2",[this._v(this._s(this.filename))]),this._v(" "),e("image-view",{ref:"imageview",attrs:{arrayBuffer:this.arrayBuffer}})],1)},staticRenderFns:[]};var w={name:"HelloWorld",data:function(){return{files:[],version:0}},methods:{selectedFile:function(t){t.preventDefault(),console.log("start reading "+t.target.files.length+" files"),this.version+=1,this.files=t.target.files}},components:{"file-view":n("VU/8")(U,C,!1,function(t){n("tARC")},"data-v-3aa5024c",null).exports}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("input",{attrs:{name:"file",type:"file",multiple:""},on:{change:t.selectedFile}}),t._v(" "),n("div",{staticClass:"fileview-container"},t._l(t.files,function(e,i){return n("file-view",{key:i,attrs:{file:e,version:t.version}})}))])},staticRenderFns:[]};var D=n("VU/8")(w,_,!1,function(t){n("SRab")},"data-v-3c5fcf42",null).exports;i.a.use(s.a);var O=new s.a({routes:[{path:"/",name:"HelloWorld",component:D}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:O,components:{App:a},template:"<App/>"})},SRab:function(t,e){},j87A:function(t,e){},mJ7C:function(t,e){},tARC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0d4d10f5039d9c4da253.js.map